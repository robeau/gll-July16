<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

<script>
    var trs = document.querySelectorAll('table#CompanylistResults > tbody > tr');
    var companies = Array.prototype.slice.call(trs);

    var json = [];
    companies.forEach(function(company,i){
        if(i%2 === 0){

            json.push({
                Name: company.children[0].textContent,
                Symbol: company.children[1].textContent.trim(),
                Market_Cap: company.children[2].textContent,
                Country: company.children[4].textContent,
                IPO_Year: company.children[5].textContent,
                Subsector: company.children[6].textContent
            });
        }
    });
/*
    function createElement(type, className, innerHTML, parent, attributes){
        var element = document.createElement(type);
        if(className) element.className = className;
        if(innerHTML) element.innerHTML = innerHTML;
        if(parent) parent.appendChild(element);
        if(attributes){
            for(var prop in attributes){
                element.setAttribute(prop, attributes[prop]);
            }
        }
        return element;
    }
*/
    var link = document.createElement('a');
    link.setAttribute("href","'data:text/json;utf-8' + JSON.stringify(json)");
    link.setAttribute("download","companies.txt");
    link.innerHTML = "Download JSON file of companies.";
    document.body.appendChild(link);



    //<a href="data:text/json;utf-8." + JSON.stringify(json)>Download JSON file of companies.</a>
</script>
</body>
</html>